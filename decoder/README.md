# Single-byte-XOR decoder shellcode

Listing:
- `encoder.c` - Encoder source code
- `decoder.s` - Decoder asm with shellcode placeholder
- `decoder_sh.s` - Autogenerated with make (replaces placeholder with shellcode)

## Usage

1. Create your desired shellcode by specifying `make shellcode PROJECT=${PROJECT}`. This will create `shellcode` file inside `out` folder.
1. Generate `decoder_sh.s` by specifying `make decoder`. This will compile encoder source file and generate XOR encoded shellcode which will be swapped with `ENCODED` placeholder in `decoder.s`.
1. Use `decoder_sh.s` in combination with any make target with `make (target) PROJECT=decoder`.

_NOTE: You might need to tweak the single-byte-xor key to evade null bytes when encoding._

## Testing

Decoder can be combined with egghunter.

Create `Hello, World` shellcode, encode it and create decoder shellcode layer:
```
$ make shellcode PROJECT=hello
...
$ make decoder
...
```

Create egghunter by specifying the `decoder` project and test:
```
$ make egghunter PROJECT=decoder
...
$ out/egghunter
Egghunter length: 46
Shellcode length: 87
Hello, World$
```

Or just test the standalone decoder:
```
$ make skeleton PROJECT=decoder
...
$ out/skeleton
Shellcode length: 79
Hello, World$
```
